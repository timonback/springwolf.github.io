"use strict";(self.webpackChunkspringwolf_docs=self.webpackChunkspringwolf_docs||[]).push([[757],{3905:(e,a,t)=>{t.d(a,{Zo:()=>c,kt:()=>m});var n=t(7294);function i(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){i(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,i=function(e,a){if(null==e)return{};var t,n,i={},r=Object.keys(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||(i[t]=e[t]);return i}(e,a);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)t=r[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var p=n.createContext({}),d=function(e){var a=n.useContext(p),t=a;return e&&(t="function"==typeof e?e(a):o(o({},a),e)),t},c=function(e){var a=d(e.components);return n.createElement(p.Provider,{value:a},e.children)},s={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},u=n.forwardRef((function(e,a){var t=e.components,i=e.mdxType,r=e.originalType,p=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),u=d(t),m=i,h=u["".concat(p,".").concat(m)]||u[m]||s[m]||r;return t?n.createElement(h,o(o({ref:a},c),{},{components:t})):n.createElement(h,o({ref:a},c))}));function m(e,a){var t=arguments,i=a&&a.mdxType;if("string"==typeof e||i){var r=t.length,o=new Array(r);o[0]=u;var l={};for(var p in a)hasOwnProperty.call(a,p)&&(l[p]=a[p]);l.originalType=e,l.mdxType="string"==typeof e?e:i,o[1]=l;for(var d=2;d<r;d++)o[d]=t[d];return n.createElement.apply(null,o)}return n.createElement.apply(null,t)}u.displayName="MDXCreateElement"},220:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>p,contentTitle:()=>o,default:()=>s,frontMatter:()=>r,metadata:()=>l,toc:()=>d});var n=t(7462),i=(t(7294),t(3905));const r={sidebar_position:5},o="Documenting Producers",l={unversionedId:"documenting-producers",id:"documenting-producers",title:"Documenting Producers",description:"Unlike consumers which are defined declaratively with an annotation, producers are defined imperatively, and there is no implementation uniform enough so that metadata can be picked up automatically.",source:"@site/docs/documenting-producers.md",sourceDirName:".",slug:"/documenting-producers",permalink:"/docs/documenting-producers",draft:!1,editUrl:"https://github.com/springwolf/springwolf.github.io/edit/master/docs/documenting-producers.md",tags:[],version:"current",sidebarPosition:5,frontMatter:{sidebar_position:5},sidebar:"tutorialSidebar",previous:{title:"Documenting Schemas",permalink:"/docs/documenting-schemas"},next:{title:"Manually Documenting Consumers",permalink:"/docs/manually-documenting-consumers"}},p={},d=[{value:"<code>ProducerData</code>",id:"producerdata",level:2},{value:"Channel Name",id:"channel-name",level:3},{value:"Description",id:"description",level:3},{value:"Binding",id:"binding",level:3},{value:"Payload Type",id:"payload-type",level:3},{value:"Header",id:"header",level:3},{value:"<code>AmqpProducerData</code>",id:"amqpproducerdata",level:2},{value:"Queue Name (Channel Name)",id:"queue-name-channel-name",level:3},{value:"Description",id:"description-1",level:3},{value:"Exchange Name",id:"exchange-name",level:3},{value:"Routing Key",id:"routing-key",level:3},{value:"Payload Type",id:"payload-type-1",level:3},{value:"Example",id:"example",level:3},{value:"<code>KafkaProducerData</code>",id:"kafkaproducerdata",level:2},{value:"Topic Name (Channel Name)",id:"topic-name-channel-name",level:3},{value:"Description",id:"description-2",level:3},{value:"Payload Type",id:"payload-type-2",level:3},{value:"Headers",id:"headers",level:3},{value:"Example",id:"example-1",level:3}],c={toc:d};function s(e){let{components:a,...t}=e;return(0,i.kt)("wrapper",(0,n.Z)({},c,t,{components:a,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"documenting-producers"},"Documenting Producers"),(0,i.kt)("p",null,"Unlike consumers which are defined declaratively with an annotation, producers are defined imperatively, and there is no implementation uniform enough so that metadata can be picked up automatically."),(0,i.kt)("p",null,"Because producers are also an important part of Async APIs, Springwolf provides a way to explicitly add them to the generated document, by declaring them in the ",(0,i.kt)("inlineCode",{parentName:"p"},"AsyncApiDocket")," using the ",(0,i.kt)("inlineCode",{parentName:"p"},"ProducerData")," object."),(0,i.kt)("h2",{id:"producerdata"},(0,i.kt)("inlineCode",{parentName:"h2"},"ProducerData")),(0,i.kt)("admonition",{type:"tip"},(0,i.kt)("p",{parentName:"admonition"},"Use specific ProducerData types ",(0,i.kt)("inlineCode",{parentName:"p"},"AmqpProducerData")," & ",(0,i.kt)("inlineCode",{parentName:"p"},"KafkaProducerData")," for protocol specific attributes")),(0,i.kt)("p",null,"Below is an example of describing a Kafka producer:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'@Bean\npublic AsyncApiDocket asyncApiDocket() {\n\n    ProducerData exampleProducerData = ProducerData.builder()\n            .channelName("example-producer-topic")\n            .description("Optional. Customer uploaded an example payload")\n            .operationBinding(ImmutableMap.of("kafka", new KafkaOperationBinding()))\n            .payloadType(ExamplePayloadDto.class)\n            .headers(AsyncHeaders.NOT_USED)\n            .build();\n  \n    return AsyncApiDocket.builder()\n            .basePackage(...)\n            .info(...)\n            .server(...)\n            .producer(exampleProducerData)\n            .build();\n}\n')),(0,i.kt)("p",null,"Multiple producers can be configured by calling the ",(0,i.kt)("inlineCode",{parentName:"p"},"producer()")," method multiple times."),(0,i.kt)("h3",{id:"channel-name"},"Channel Name"),(0,i.kt)("p",null,"The channel name (or topic name in case of Kafka) - this is the name that will be used to publish messages to by the UI."),(0,i.kt)("h3",{id:"description"},"Description"),(0,i.kt)("p",null,"Optional. The description allows for human-friendly text to verbosely explain the ",(0,i.kt)("em",{parentName:"p"},"message"),", like specific domain, what the topic is used for and which data it contains."),(0,i.kt)("h3",{id:"binding"},"Binding"),(0,i.kt)("p",null,"This property is used to discriminate the producer's protocol and provide protocol-specific properties (see ",(0,i.kt)("a",{parentName:"p",href:"https://www.asyncapi.com/docs/specifications/v2.0.0#operationBindingsObject"},"Operation Binding Object"),")."),(0,i.kt)("h3",{id:"payload-type"},"Payload Type"),(0,i.kt)("p",null,"The class object of the payload that will be published to this channel."),(0,i.kt)("h3",{id:"header"},"Header"),(0,i.kt)("p",null,"Optional. The headers describing the metadata of the payload.\nBy default, ",(0,i.kt)("inlineCode",{parentName:"p"},"AsyncHeaders.NOT_DOCUMENTED")," is used to indicate that no explicit header documentation exists.\nUse ",(0,i.kt)("inlineCode",{parentName:"p"},"AsyncHeaders")," to add your custom headers, use ",(0,i.kt)("inlineCode",{parentName:"p"},"AsyncHeaders.NOT_USED")," if you do not use headers and ",(0,i.kt)("inlineCode",{parentName:"p"},"AsyncHeadersForCloudEventsBuilder")," if your events follow the CloudEvent specification."),(0,i.kt)("h2",{id:"amqpproducerdata"},(0,i.kt)("inlineCode",{parentName:"h2"},"AmqpProducerData")),(0,i.kt)("p",null,"The above Kafka ",(0,i.kt)("inlineCode",{parentName:"p"},"ProducerData")," equivalent in ",(0,i.kt)("inlineCode",{parentName:"p"},"AmqpProducerData"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'    AmqpProducerData exampleProducer = AmqpProducerData.amqpProducerDataBuilder()\n        .queueName("example-producer-channel")\n        .description("example-producer-channel-description")\n        .exchangeName("example-topic-exchange")\n        .routingKey("example-topic-routing-key")\n        .payloadType(AnotherPayloadDto.class)\n        .build();\n')),(0,i.kt)("h3",{id:"queue-name-channel-name"},"Queue Name (Channel Name)"),(0,i.kt)("p",null,"The queue name that will be used to publish messages to by the UI."),(0,i.kt)("h3",{id:"description-1"},"Description"),(0,i.kt)("p",null,"Optional. The description allows for human-friendly text to verbosely explain the ",(0,i.kt)("em",{parentName:"p"},"message"),", like specific domain, what the topic is used for and which data it contains."),(0,i.kt)("h3",{id:"exchange-name"},"Exchange Name"),(0,i.kt)("p",null,"The exchange name that will be used to bind queues to."),(0,i.kt)("h3",{id:"routing-key"},"Routing Key"),(0,i.kt)("p",null,"The routing key used when publishing a message."),(0,i.kt)("h3",{id:"payload-type-1"},"Payload Type"),(0,i.kt)("p",null,"The class object of the payload that will be published to this channel."),(0,i.kt)("h3",{id:"example"},"Example"),(0,i.kt)("p",null,"See a full example ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/springwolf/springwolf-core/blob/master/springwolf-examples/springwolf-amqp-example/src/main/java/io/github/stavshamir/springwolf/example/configuration/AsyncApiConfiguration.java"},"here"),"."),(0,i.kt)("h2",{id:"kafkaproducerdata"},(0,i.kt)("inlineCode",{parentName:"h2"},"KafkaProducerData")),(0,i.kt)("p",null,"The above Kafka ",(0,i.kt)("inlineCode",{parentName:"p"},"ProducerData")," simplifies to the following ",(0,i.kt)("inlineCode",{parentName:"p"},"KafkaProducerData"),":"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-java"},'    KafkaProducerData exampleProducerData = KafkaProducerData.kafkaProducerDataBuilder()\n        .topicName("example-producer-topic")\n        .description("Optional. Customer uploaded an example payload")\n        .payloadType(ExamplePayloadDto.class)\n        .headers(AsyncHeaders.NOT_USED)\n        .build();\n')),(0,i.kt)("h3",{id:"topic-name-channel-name"},"Topic Name (Channel Name)"),(0,i.kt)("p",null,"The topic name that will be used to publish messages to by the UI."),(0,i.kt)("h3",{id:"description-2"},"Description"),(0,i.kt)("p",null,"Optional. The description allows for human-friendly text to verbosely explain the ",(0,i.kt)("em",{parentName:"p"},"message"),", like specific domain, what the topic is used for and which data it contains."),(0,i.kt)("h3",{id:"payload-type-2"},"Payload Type"),(0,i.kt)("p",null,"The class object of the payload that will be published to this channel."),(0,i.kt)("h3",{id:"headers"},"Headers"),(0,i.kt)("p",null,"The Kafka headers describing the metadata of the payload, more details in the generic ProducerData."),(0,i.kt)("p",null,"The Springwolf Kafka plugin comes with a special ",(0,i.kt)("inlineCode",{parentName:"p"},"AsyncHeadersForSpringKafkaBuilder")," to document the ",(0,i.kt)("inlineCode",{parentName:"p"},"__TypeId__")," header of the spring-kafka dependency."),(0,i.kt)("h3",{id:"example-1"},"Example"),(0,i.kt)("p",null,"See a full example ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/springwolf/springwolf-core/blob/master/springwolf-examples/springwolf-kafka-example/src/main/java/io/github/stavshamir/springwolf/example/configuration/AsyncApiConfiguration.java"},"here"),"."))}s.isMDXComponent=!0}}]);